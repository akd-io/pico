# Picotron findings

## Stat

- `stat(307) & 0x1` seems to be `1` for "trusted system apps"

## Misc

- `_update` runs at 60 fps. `_update60` is not a thing in Picotron.
- Contrary to expectation, `pwd` points to script location while `env().path` points to the directory from which the script was run.
- @soundsdotzip on Discord mentioned `store("screenshot.png",get_display())` to save a screenshot.
- @_maxine_ mentioned `store("/desktop/trash.loc", {location="/ram/compost"})`

## Dumps

### Builtins - `_ENV`

See [`builtins.txt`](drive/dumps/builtins.txt) for full list of all builtins. Generated by [`builtins.lua`](drive/desktop/projects/builtins/main.lua) as part of [`dump.lua`](drive/projects/dump/dump.lua).

### Environment - `env()`

See [`env.txt`](drive/dumps/env.txt) for sample object returned by `env()`. Generated by [`env.lua`](drive/desktop/projects/env/main.lua) as part of [`dump.lua`](drive/projects/dump/dump.lua).

### Ram - `/ram`

See [`/ram`](drive/dumps/ram) folder for a dump of all files in Picotron's `/ram` folder. Generated by [`dump.lua`](drive/projects/dump/dump.lua).

### System - `/system`

See [`/system`](drive/dumps/system) folder for a dump of all files in Picotron's `/system` folder. Generated by [`dump.lua`](drive/projects/dump/dump.lua).

## Feedback

### `mkdir()`

Current behavior:

- On success, mkdir() returns nil.
- On failure, mkdir() returns "mkdir failed".

Expected behavior:

On failure, mkdir() throws an error?

Or mkdir() returns `success, error`, where `success` is a boolean and `error` is an error message.

I've only tried mkdir() failing when trying to create a directory in a directory that doesn't exist. A specific error message for that scenario would be great.

A possible fix could also be to make mkdir() recursive by default.
